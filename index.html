<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="icon" type="image/x-icon" href="img/icon_blue.png">
    <title>Jomiel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css"  href="css/default_bootstrap.css" rel="stylesheet">
    <link type="text/css"  href="css/default_bootstrap.min.css" rel="stylesheet">
    <link type="text/css"  href="css/custom.css" rel="stylesheet">
    <script type="text/javascript" src="js/bootstrap.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
      var pagename="aboutMe";
    </script>
</head>
<body class="aboutMe">
  <div class="render" include-html="navigation.html"></div>

  <style>
    
  </style>
  <div id="container_text">
    <div class="word"></div>
    <span id="text1"></span>
    <span id="text2"></span>
  </div>
  
  <div class="myimage">
    <div class="imgMyImage">
      <img class="imgMyImageimage" src="img/Programmer.gif"/>
    </div>

  </div>
  <div class="container">
      <div id="timeline" class="timeline">
        <!-- datas will be inserted using javascript code -->
      </div>

      <div class="bs-docs-section">
        <div class="row">
          <div class="col-lg-12">
            <div class="page-header">
              <h1 id="navs">Projects</h1>
            </div>
          </div>
        </div>
        <div class="row" id="div_Projects">
          <!-- Projects will be inserted programmatically -->
        </div>
      </div>

      <div class="bs-docs-section">
        <div class="row">
          <div class="col-lg-12">
            <div class="page-header">
              <h1 id="navs">Other Projects</h1>
            </div>
          </div>
        </div>
        <div class="row" id="div_otherProjects">
          <!-- Other projects will be inserted programmatically -->
        </div>
      </div>

      <div class="bs-docs-section">
        <div class="row">
          <div class="col-lg-12">
            <div class="page-header">
              <h1 id="navs">Certificates</h1>
            </div>
          </div>
        </div>
        <div class="row" id="div_certificates">
          <!-- Certificates will be inserted programmatically -->
        </div>
      </div>      

      <div class="render" include-html="footer.html"></div>
      
  </div>  
<script src="About.js"></script>
<script>
  const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun",
  "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
];
  console.log(about["timeline"]);
  var isLeft = true;
  for(i=2023;i>2000;i--){
    year = about["timeline"][i];
    if(year==null) break;
    var work = year["work"];
    Object.keys(work).forEach(key=>{
      var item = work[key];
      var logo = item["logo"],
          year = i,
          title= item["title"],
          companyname = item["companyname"]
          status = item["status"]!= "" ? ` <b class="middleDot">&#183;</b> `+item["status"]:""
          startDate = monthNames[new Date(item["StartDate"]).getMonth()] + " " + new Date(item["StartDate"]).getFullYear()
          endDate = item["EndDate"]!=""?monthNames[new Date(item["EndDate"]).getMonth()] + " " + new Date(item["EndDate"]).getFullYear():"Present",
          dateEndDate = item["EndDate"]==""?new Date():new Date(item["EndDate"]),
          monthDiffe = monthDiff(new Date(item["StartDate"]),dateEndDate),
          duration = getYearsMonths(monthDiffe),
          worklocation = item["location"],
          RO = item["RO"],
          skills = item["Skills"],
          description = item["Description"]==""?"":item["Description"]+"<br><br>",
          timelineLocation = isLeft?"left":"right";

      $("#timeline").append(`<div class="containertimeline `+timelineLocation+`">
              <div class="contenttimeline">
                <div style="margin-right:5px;">
                  <img class="timelineImage" src="`+logo+`">
    
                </div>
                <div>
                  <h2>`+year+`</h2>
                  <p>
                    <b>`+title+`</b> <br>
                    `+companyname +  status + ` <br>
                    `+startDate+` - `+endDate+` <b class="middleDot">&#183;</b> `+duration+` <br>
                    `+worklocation+` <b class="middleDot">&#183;</b> `+RO+` <br> <br>`+description+`
                    <b>Skills: `+skills+`</b>
                  </p>
                  
                </div>
              </div>
            </div>`);
    })
    isLeft=!isLeft;
  }

  //Insert projects
  for(i=0;i<Object.keys(about["Projects"]).length;i++){
    console.log(i);
    var data=about["Projects"][i];
    var title =data["imageLink"]!=""?"": `<text x="50%" y="50%" fill="#dee2e6" dy=".3em">`+data["Title"]+`</text>`;
    var repo = data["projectLink"]!=""?`<div class="card-body"><a href="`+data["projectLink"]+`" class="card-link">`+data["Title"]+` Repo</a></div>`:""
    $("#div_Projects").append(`<div class="col-lg-4">
            <div class="bs-component">
              <div class="card mb-3">
                <h3 class="card-header">`+data["Title"]+`</h3>
                <svg xmlns="" class="d-block user-select-none" width="100%" height="200" aria-label="Placeholder: Image cap" focusable="false" role="img" preserveAspectRatio="xMidYMid slice" viewBox="0 0 318 180" style="font-size:1.125rem;text-anchor:middle">
                  <rect width="100%" height="100%" fill="#868e96"></rect>
                  `+ title +`
                  <image width="100%" height="100%" href="`+data["imageLink"]+`">
                </svg>
                <div class="card-body">
                  <p class="card-text">`+data["Description"]+`</p>
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">Skills: `+data["Skills"]+`</li>
                </ul>
                `+repo+`
                <div class="card-footer text-muted">
                  `+data["projectDate"]+`
                </div>
              </div>

            </div>
          </div>`);
  };

  //Insert other Projects
  for(i=0;i<Object.keys(about["otherProjects"]).length;i++){
    console.log(i);
    var data=about["otherProjects"][i];
    var title =data["imageLink"]!=""?"": `<text x="50%" y="50%" fill="#dee2e6" dy=".3em">`+data["Title"]+`</text>`;
    var repo = data["ProjectRepoLink"]!=""?`<div class="card-body"><a href="`+data["ProjectRepoLink"]+`" class="card-link">`+data["Title"]+` Repo</a></div>`:""
    $("#div_otherProjects").append(`<div class="col-lg-4">
            <div class="bs-component">
              <div class="card mb-3">
                <h3 class="card-header">`+data["Title"]+`</h3>
                <svg xmlns="" class="d-block user-select-none" width="100%" height="200" aria-label="Placeholder: Image cap" focusable="false" role="img" preserveAspectRatio="xMidYMid slice" viewBox="0 0 318 180" style="font-size:1.125rem;text-anchor:middle">
                  <rect width="100%" height="100%" fill="#868e96"></rect>
                  `+ title +`
                  <image width="100%" height="100%" href="`+data["imageLink"]+`">
                </svg>
                <div class="card-body">
                  <p class="card-text">`+data["Description"]+`</p>
                </div>
                <div class="card-body"><a href="`+data["ProjectLink"]+`" class="card-link">`+data["Title"]+` Link</a></div>
                `+repo+`
                <div class="card-footer text-muted">
                  `+data["projectDate"]+`
                </div>
              </div>

            </div>
          </div>`);
  };

   //Insert other Certificates
   for(i=0;i<Object.keys(about["certificates"]).length;i++){
    console.log(i);
    var data=about["certificates"][i];
    var title =data["imageLoc"]!=""?"": `<text x="50%" y="50%" fill="#dee2e6" dy=".3em">`+data["Title"]+`</text>`;
    //var repo = data["ProjectRepoLink"]!=""?`<div class="card-body"><a href="`+data["ProjectRepoLink"]+`" class="card-link">`+data["Title"]+` Repo</a></div>`:""
    $("#div_certificates").append(`<div class="col-lg-4">
            <div class="bs-component">
              <div class="card mb-3">
                <h3 class="card-header">`+data["Title"]+`</h3>
                <svg xmlns="" class="d-block user-select-none" width="100%" height="200" aria-label="Placeholder: Image cap" focusable="false" role="img" preserveAspectRatio="xMidYMid slice" viewBox="0 0 318 180" style="font-size:1.125rem;text-anchor:middle">
                  <rect width="100%" height="100%" fill="#868e96"></rect>
                  `+ title +`
                  <image width="100%" height="100%" href="`+data["imageLoc"]+`">
                </svg>
                <div class="card-body">
                  <p class="card-text"> Issued By: `+data["issuedBy"]+`</p>
                </div>
                <div class="card-footer text-muted">
                  `+data["issueDate"]+`
                </div>
              </div>

            </div>
          </div>`);
  };

  function getYearsMonths(monthDiffe){
    var years = Math.trunc(monthDiffe/12), months = Math.trunc(monthDiffe%12);
    var output ="";
    output += years>0? String(years) + checkYear(years) + " " : "";
    output += months>0?String(months)+ " " + checkMonths(months) : ""
    return output;
  }
  function checkYear(years){
    return years>1?"yrs":"yr";
  }
  function checkMonths(months){
    return months>1?"mos":"mo";
  }
  function monthDiff(d1, d2) {
    var months;
    months = (d2.getFullYear() - d1.getFullYear()) * 12;
    months -= d1.getMonth();
    months += d2.getMonth();
    return months <= 0 ? 0 : months;
  }
  
  //Text Effect
  var words = [
    'Hello, I am Jomiel Enriquez..',
    'I am a Software Engineer..', 
    'I really enjoy programming..'],
    part,
    i = 0,
    offset = 0,
    len = words.length,
    forwards = true,
    skip_count = 0,
    skip_delay = 15,
    speed = 70;
  var wordflick = function () {
    setInterval(function () {
      if (forwards) {
        if (offset >= words[i].length) {
          ++skip_count;
          if (skip_count == skip_delay) {
            forwards = false;
            skip_count = 0;
          }
        }
      }
      else {
        if (offset == 0) {
          forwards = true;
          i++;
          offset = 0;
          if (i >= len) {
            i = 0;
          }
        }
      }
      part = words[i].substr(0, offset);
      if (skip_count == 0) {
        if (forwards) {
          offset++;
        }
        else {
          offset--;
        }
      }
      $('.word').text(part);
    },speed);
  };

  $(document).ready(function () {
    wordflick();
  });
</script>
</body>
<script type="text/javascript" src="js/custom.js"></script>
<script>
  includeHTML("aboutMe");
</script>
</html>